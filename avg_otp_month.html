<!DOCTYPE html>
<html>
<head>
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.8.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-60dd3be141d0ed28b4cd9071f121feae"}, "mark": {"type": "line", "point": true}, "encoding": {"color": {"condition": {"test": "datum.month === month_selection || month_selection === null", "field": "month", "scale": {"domain": ["2024-01", "2024-02", "2024-03", "2024-04", "2024-05", "2024-06", "2024-07", "2024-08", "2024-09", "2024-10", "2024-11", "2024-12"], "range": ["#1f77b4", "#ff7f0e", "#d62728", "#2ca02c", "#bcbd22", "#17becf", "#9467bd", "#e377c2", "#8c564b", "#7f7f7f", "#aec7e8", "#ffbb78"]}, "title": "Month", "type": "nominal"}, "value": "lightgray"}, "opacity": {"condition": {"test": "datum.month === month_selection || month_selection === null", "value": 1}, "value": 0.3}, "tooltip": [{"field": "month", "type": "nominal"}, {"field": "week_in_month", "type": "quantitative"}, {"field": "otp_ratio", "type": "quantitative"}], "x": {"field": "week_in_month", "title": "Week in Month", "type": "ordinal"}, "y": {"field": "otp_ratio", "scale": {"domain": [0.8, 1.0]}, "title": "Average OTP Ratio", "type": "quantitative"}}, "height": 400, "params": [{"name": "month_selection", "bind": {"input": "select", "options": [null, "2024-01", "2024-02", "2024-03", "2024-04", "2024-05", "2024-06", "2024-07", "2024-08", "2024-09", "2024-10", "2024-11", "2024-12"], "labels": ["All", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], "name": "Select Month: "}}], "title": "Average OTP Ratio per Week", "transform": [{"calculate": "!month_selection || datum.month === month_selection", "as": "is_selected"}], "width": 700, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-60dd3be141d0ed28b4cd9071f121feae": [{"month": "2024-01", "week_start": "2024-01-01T00:00:00", "week_number": 1, "otp_ratio": 0.9449668874172186, "week_in_month": 1}, {"month": "2024-01", "week_start": "2024-01-08T00:00:00", "week_number": 2, "otp_ratio": 0.9098795180722891, "week_in_month": 2}, {"month": "2024-01", "week_start": "2024-01-15T00:00:00", "week_number": 3, "otp_ratio": 0.9061445783132529, "week_in_month": 3}, {"month": "2024-01", "week_start": "2024-01-22T00:00:00", "week_number": 4, "otp_ratio": 0.9446987951807229, "week_in_month": 4}, {"month": "2024-01", "week_start": "2024-01-29T00:00:00", "week_number": 5, "otp_ratio": 0.9181818181818182, "week_in_month": 5}, {"month": "2024-02", "week_start": "2024-02-05T00:00:00", "week_number": 6, "otp_ratio": 0.9353374233128835, "week_in_month": 1}, {"month": "2024-02", "week_start": "2024-02-12T00:00:00", "week_number": 7, "otp_ratio": 0.925090909090909, "week_in_month": 2}, {"month": "2024-02", "week_start": "2024-02-19T00:00:00", "week_number": 8, "otp_ratio": 0.951523178807947, "week_in_month": 3}, {"month": "2024-02", "week_start": "2024-02-26T00:00:00", "week_number": 9, "otp_ratio": 0.9382530120481928, "week_in_month": 4}, {"month": "2024-03", "week_start": "2024-03-04T00:00:00", "week_number": 10, "otp_ratio": 0.9398795180722892, "week_in_month": 1}, {"month": "2024-03", "week_start": "2024-03-11T00:00:00", "week_number": 11, "otp_ratio": 0.9353333333333335, "week_in_month": 2}, {"month": "2024-03", "week_start": "2024-03-18T00:00:00", "week_number": 12, "otp_ratio": 0.9291411042944785, "week_in_month": 3}, {"month": "2024-03", "week_start": "2024-03-25T00:00:00", "week_number": 13, "otp_ratio": 0.9251807228915664, "week_in_month": 4}, {"month": "2024-04", "week_start": "2024-04-01T00:00:00", "week_number": 14, "otp_ratio": 0.9194578313253011, "week_in_month": 1}, {"month": "2024-04", "week_start": "2024-04-08T00:00:00", "week_number": 15, "otp_ratio": 0.9246385542168675, "week_in_month": 2}, {"month": "2024-04", "week_start": "2024-04-15T00:00:00", "week_number": 16, "otp_ratio": 0.9448795180722891, "week_in_month": 3}, {"month": "2024-04", "week_start": "2024-04-22T00:00:00", "week_number": 17, "otp_ratio": 0.9276506024096386, "week_in_month": 4}, {"month": "2024-04", "week_start": "2024-04-29T00:00:00", "week_number": 18, "otp_ratio": 0.9471779141104294, "week_in_month": 5}, {"month": "2024-05", "week_start": "2024-05-06T00:00:00", "week_number": 19, "otp_ratio": 0.9089759036144578, "week_in_month": 1}, {"month": "2024-05", "week_start": "2024-05-13T00:00:00", "week_number": 20, "otp_ratio": 0.9060240963855422, "week_in_month": 2}, {"month": "2024-05", "week_start": "2024-05-20T00:00:00", "week_number": 21, "otp_ratio": 0.8407831325301205, "week_in_month": 3}, {"month": "2024-05", "week_start": "2024-05-27T00:00:00", "week_number": 22, "otp_ratio": 0.9095333333333334, "week_in_month": 4}, {"month": "2024-06", "week_start": "2024-06-03T00:00:00", "week_number": 23, "otp_ratio": 0.9083536585365853, "week_in_month": 1}, {"month": "2024-06", "week_start": "2024-06-10T00:00:00", "week_number": 24, "otp_ratio": 0.8918072289156626, "week_in_month": 2}, {"month": "2024-06", "week_start": "2024-06-17T00:00:00", "week_number": 25, "otp_ratio": 0.8223030303030303, "week_in_month": 3}, {"month": "2024-06", "week_start": "2024-06-24T00:00:00", "week_number": 26, "otp_ratio": 0.9095092024539877, "week_in_month": 4}, {"month": "2024-07", "week_start": "2024-07-01T00:00:00", "week_number": 27, "otp_ratio": 0.9210067114093959, "week_in_month": 1}, {"month": "2024-07", "week_start": "2024-07-08T00:00:00", "week_number": 28, "otp_ratio": 0.8642168674698796, "week_in_month": 2}, {"month": "2024-07", "week_start": "2024-07-15T00:00:00", "week_number": 29, "otp_ratio": 0.897030303030303, "week_in_month": 3}, {"month": "2024-07", "week_start": "2024-07-22T00:00:00", "week_number": 30, "otp_ratio": 0.9133734939759036, "week_in_month": 4}, {"month": "2024-07", "week_start": "2024-07-29T00:00:00", "week_number": 31, "otp_ratio": 0.892992700729927, "week_in_month": 5}, {"month": "2024-08", "week_start": "2024-08-05T00:00:00", "week_number": 32, "otp_ratio": 0.9129696969696969, "week_in_month": 1}, {"month": "2024-08", "week_start": "2024-08-12T00:00:00", "week_number": 33, "otp_ratio": 0.9356363636363636, "week_in_month": 2}, {"month": "2024-08", "week_start": "2024-08-19T00:00:00", "week_number": 34, "otp_ratio": 0.9265060240963856, "week_in_month": 3}, {"month": "2024-08", "week_start": "2024-08-26T00:00:00", "week_number": 35, "otp_ratio": 0.9403614457831325, "week_in_month": 4}, {"month": "2024-09", "week_start": "2024-09-02T00:00:00", "week_number": 36, "otp_ratio": 0.9027152317880794, "week_in_month": 1}, {"month": "2024-09", "week_start": "2024-09-09T00:00:00", "week_number": 37, "otp_ratio": 0.865120481927711, "week_in_month": 2}, {"month": "2024-09", "week_start": "2024-09-16T00:00:00", "week_number": 38, "otp_ratio": 0.8753939393939394, "week_in_month": 3}, {"month": "2024-09", "week_start": "2024-09-23T00:00:00", "week_number": 39, "otp_ratio": 0.9072289156626505, "week_in_month": 4}, {"month": "2024-09", "week_start": "2024-09-30T00:00:00", "week_number": 40, "otp_ratio": 0.9025301204819277, "week_in_month": 5}, {"month": "2024-10", "week_start": "2024-10-07T00:00:00", "week_number": 41, "otp_ratio": 0.8828313253012049, "week_in_month": 1}, {"month": "2024-10", "week_start": "2024-10-14T00:00:00", "week_number": 42, "otp_ratio": 0.8903614457831326, "week_in_month": 2}, {"month": "2024-10", "week_start": "2024-10-21T00:00:00", "week_number": 43, "otp_ratio": 0.8562048192771085, "week_in_month": 3}, {"month": "2024-10", "week_start": "2024-10-28T00:00:00", "week_number": 44, "otp_ratio": 0.822289156626506, "week_in_month": 4}, {"month": "2024-11", "week_start": "2024-11-04T00:00:00", "week_number": 45, "otp_ratio": 0.8486060606060607, "week_in_month": 1}, {"month": "2024-11", "week_start": "2024-11-11T00:00:00", "week_number": 46, "otp_ratio": 0.9278313253012049, "week_in_month": 2}, {"month": "2024-11", "week_start": "2024-11-18T00:00:00", "week_number": 47, "otp_ratio": 0.8634146341463415, "week_in_month": 3}, {"month": "2024-11", "week_start": "2024-11-25T00:00:00", "week_number": 48, "otp_ratio": 0.9125, "week_in_month": 4}, {"month": "2024-12", "week_start": "2024-12-02T00:00:00", "week_number": 49, "otp_ratio": 0.8904848484848485, "week_in_month": 2}, {"month": "2024-12", "week_start": "2024-12-09T00:00:00", "week_number": 50, "otp_ratio": 0.898855421686747, "week_in_month": 3}, {"month": "2024-12", "week_start": "2024-12-16T00:00:00", "week_number": 51, "otp_ratio": 0.890670731707317, "week_in_month": 4}, {"month": "2024-12", "week_start": "2024-12-23T00:00:00", "week_number": 52, "otp_ratio": 0.8951655629139073, "week_in_month": 5}, {"month": "2024-12", "week_start": "2024-12-30T00:00:00", "week_number": 1, "otp_ratio": 0.9453571428571428, "week_in_month": 1}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>